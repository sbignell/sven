"use strict";exports.init=function(a,b){b.render("contact/index")},exports.sendMessage=function(a,b){var c=a.app.utility.workflow(a,b);c.on("validate",function(){return a.body.name||(c.outcome.errfor.name="required"),a.body.email||(c.outcome.errfor.email="required"),a.body.message||(c.outcome.errfor.message="required"),c.hasErrors()?c.emit("response"):void c.emit("sendEmail")}),c.on("sendEmail",function(){a.app.utility.sendmail(a,b,{from:a.app.config.smtp.from.name+" <"+a.app.config.smtp.from.address+">",replyTo:a.body.email,to:a.app.config.systemEmail,subject:a.app.config.projectName+" contact form",textPath:"contact/email-text",htmlPath:"contact/email-html",locals:{name:a.body.name,email:a.body.email,message:a.body.message,projectName:a.app.config.projectName},success:function(){c.emit("response")},error:function(a){c.outcome.errors.push("Error Sending: "+a),c.emit("response")}})}),c.emit("validate")};
//# sourceMappingURL=index%20(2).min.js.map